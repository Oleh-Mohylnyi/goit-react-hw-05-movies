(this["webpackJsonpgoit-react-hw-05-movies"]=this["webpackJsonpgoit-react-hw-05-movies"]||[]).push([[5],{34:function(e,t,r){"use strict";r.d(t,"e",(function(){return l})),r.d(t,"d",(function(){return f})),r.d(t,"b",(function(){return m})),r.d(t,"a",(function(){return b})),r.d(t,"c",(function(){return p}));var n=r(37),c=r.n(n),a=r(38),o="9b5febc096912e8933f83f306c054db0",i="https://api.themoviedb.org/3";function s(e){return u.apply(this,arguments)}function u(){return u=Object(a.a)(c.a.mark((function e(t){var r,n,a=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:"",e.next=3,fetch("".concat(i).concat(t,"?api_key=").concat(o).concat(r));case 3:if(!(n=e.sent).ok){e.next=10;break}return e.next=7,n.json();case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=Promise.reject(new Error("Not found"));case 11:return e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e)}))),u.apply(this,arguments)}function l(){return s("/trending/movie/week")}function f(e){return s("/search/movie","&query=".concat(e))}function m(e){return s("/movie/".concat(e))}function b(e){return s("/movie/".concat(e,"/credits"))}function p(e){return s("/movie/".concat(e,"/reviews"))}},36:function(e,t,r){"use strict";t.a=r.p+"static/media/cinema-movie.5c8f8c5b.jpg"},39:function(e,t,r){e.exports={Gallery:"gallery_Gallery__LOFCh"}},40:function(e,t,r){e.exports={Item:"galleryItem_Item__1dJ4G",Image:"galleryItem_Image__A6sJe",Title:"galleryItem_Title__3TudR",Link:"galleryItem_Link__3Io9f",Average:"galleryItem_Average__3WQG7"}},41:function(e,t,r){"use strict";r.d(t,"a",(function(){return m}));var n=r(39),c=r.n(n),a=r(42),o=r(7),i=r(36),s=r(40),u=r.n(s),l=r(1);function f(e){var t=e.movie,r=e.location,n=t.id,c=t.poster_path,s=t.original_title,f=t.vote_average;return Object(l.jsxs)("li",{className:u.a.Item,children:[Object(l.jsxs)(o.b,{className:u.a.Link,to:{pathname:"movies/".concat(n),state:{from:{location:r,label:"back to ".concat("/"===r.pathname?"Home":"/movies"===r.pathname?"Movies":void 0)}}},children:[Object(l.jsx)("img",{alt:"",className:u.a.Image,width:"200px",src:c?"https://image.tmdb.org/t/p/w300".concat(c):i.a}),Object(l.jsx)("p",{className:u.a.Title,children:s})]}),0!==f&&Object(l.jsxs)("p",{className:u.a.Average,children:[Object(l.jsx)(a.a,{}),f]})]})}function m(e){e.status;var t=e.movies,r=e.location;return Object(l.jsx)("ul",{className:c.a.Gallery,children:t.map((function(e){return Object(l.jsx)(f,{location:r,movie:e},e.id)}))})}},62:function(e,t,r){e.exports={Form:"moviesView_Form__14VRM"}},67:function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}r.r(t),r.d(t,"default",(function(){return v}));var o=r(14),i=r(0),s=r(2),u=r(34),l=r(35),f=r.n(l),m=r(62),b=r.n(m),p=r(41),j=r(1);function v(){var e,t=Object(i.useState)(""),r=Object(o.a)(t,2),n=r[0],c=r[1],l=Object(i.useState)((function(){var e;return null!==(e=JSON.parse(localStorage.getItem("searchQueryMovies")))&&void 0!==e?e:""})),m=Object(o.a)(l,2),v=m[0],d=m[1],h=Object(i.useState)((function(){var e;return null!==(e=JSON.parse(localStorage.getItem("foundMovies")))&&void 0!==e?e:null})),O=Object(o.a)(h,2),g=O[0],y=O[1],x=Object(i.useState)("idle"),_=Object(o.a)(x,2),w=_[0],I=_[1],S=Object(s.h)(),k=Object(s.g)(),N=null!==(e=new URLSearchParams(S.search).get("search"))&&void 0!==e?e:"";function P(e){if(0===e.results.length)return I("reject"),void k.push(a(a({},S),{},{search:""}));""!==v&&k.push(a(a({},S),{},{search:"search=".concat(v)})),I("resolved"),localStorage.setItem("foundMovies",JSON.stringify(e.results)),y(e.results)}Object(i.useEffect)((function(){if(N!==v){if(""===N&&""===n)return c(""),void I("idle");I("pending"),u.d(v).then(P).catch((function(e){return I("reject")}))}else I("resolved")}),[v]);return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("form",{className:b.a.Form,onSubmit:function(e){""!==n.trim()?(n.toLowerCase().trim()!==v?(d(n.toLowerCase().trim()),localStorage.setItem("searchQueryMovies",JSON.stringify(n.toLowerCase().trim()))):(I("resolved"),k.push(a(a({},S),{},{search:"search=".concat(v)}))),e.preventDefault()):alert("please enter your request")},children:[Object(j.jsx)("input",{value:n,onInput:function(e){c(e.target.value)},type:"text"}),Object(j.jsx)("button",{type:"submit",children:"Search"})]}),"pending"===w&&Object(j.jsx)(f.a,{type:"ThreeDots",color:"black"}),"resolved"===w&&g&&Object(j.jsx)(p.a,{status:w,movies:g,location:S}),"reject"===w&&Object(j.jsx)("h2",{children:'no results found for request: "'.concat(v,'"')})]})}}}]);
//# sourceMappingURL=movies-view.3dac39c9.chunk.js.map
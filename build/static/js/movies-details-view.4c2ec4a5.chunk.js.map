{"version":3,"sources":["services/moviesApi/moviesApi.js","images/cinema-movie.jpg","views/MovieDetailsView/movieDetailsView.module.scss","components/MovieCard/movieCard.module.scss","components/MovieCard/MovieCard.js","views/MovieDetailsView/MovieDetailsView.js"],"names":["KEY","URL","fetchMovies","mainQueryString","a","otherQueryString","fetch","response","ok","json","Promise","reject","Error","fetchTrending","fetchSearch","searchQuery","fetchDetails","movieId","fetchCast","fetchReviews","module","exports","MovieCard","movieDetails","poster_path","original_title","vote_average","overview","genres","className","s","Card","alt","width","Image","src","alternativePicture","InfoList","Title","reduce","acc","genre","name","MovieSubCast","lazy","MovieSubReviews","MovieDetailsView","useState","setMovieDetails","status","setStatus","useParams","useRouteMatch","url","path","location","useLocation","history","useHistory","locationToBack","state","from","labelToBack","label","useEffect","movieApi","then","type","Button","onClick","push","color","SubNavBar","SubInfoList","to","pathname","activeClassName","ActiveLink","Link","exact","fallback"],"mappings":"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","file":"static/js/movies-details-view.4c2ec4a5.chunk.js","sourcesContent":["const KEY = \"9b5febc096912e8933f83f306c054db0\";\nconst URL = \"https://api.themoviedb.org/3\";\n\nasync function fetchMovies(mainQueryString, otherQueryString=\"\") {\n\n    const response = await fetch(\n        `${URL}${mainQueryString}?api_key=${KEY}${otherQueryString}`\n    )\n    return response.ok\n        ? await response.json()\n        : Promise.reject(new Error('Not found'))\n}\n\nexport function fetchTrending() {\n    return fetchMovies('/trending/movie/week')\n}\n\nexport function fetchSearch(searchQuery) {\n    return fetchMovies(`/search/movie`, `&query=${searchQuery}`)\n}\n\nexport function fetchDetails(movieId) {\n    return fetchMovies(`/movie/${movieId}`)\n}\n\nexport function fetchCast(movieId) {\n    return fetchMovies(`/movie/${movieId}/credits`)\n}\n\nexport function fetchReviews(movieId) {\n    return fetchMovies(`/movie/${movieId}/reviews`)\n}\n","export default __webpack_public_path__ + \"static/media/cinema-movie.5c8f8c5b.jpg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"movieDetailsView_Button__27AwM\",\"SubInfoList\":\"movieDetailsView_SubInfoList__Ks_hs\",\"SubNavBar\":\"movieDetailsView_SubNavBar__WEkeQ\",\"Link\":\"movieDetailsView_Link__lEgCh\",\"ActiveLink\":\"movieDetailsView_ActiveLink__30WMY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Card\":\"movieCard_Card__1CLTb\",\"Image\":\"movieCard_Image__2Voyt\",\"Title\":\"movieCard_Title__FAMvi\"};","import s from './movieCard.module.scss';\nimport alternativePicture from '../../images/cinema-movie.jpg';\n\nexport default function MovieCard({movieDetails}) {\n    const { poster_path, original_title, vote_average, overview, genres} = movieDetails\n\n    return (\n        <div className={s.Card}>\n                <img alt=\"\"\n                    width=\"300px\"\n                    className={s.Image} \n                    src={poster_path\n                        ?`https://image.tmdb.org/t/p/w300${poster_path}`\n                        :alternativePicture}>\n                </img>\n                <div className={s.InfoList}>\n                    <h1 className={s.Title} >{original_title}</h1>\n                    <ul>\n                        \n                        {vote_average &&\n                            <li>\n                                <h2>Average</h2>\n                                <p>{vote_average}</p>\n                            </li>\n                        }\n                        {overview &&\n                            <li>\n                                <h2>Overview</h2>\n                                <p>{overview}</p>\n                            </li>\n                        }\n                        {genres &&\n                            <li>\n                                <h2>Genres</h2>\n                                <p>{genres.reduce((acc, genre) => acc=acc+\" \"+genre.name, '')}</p>\n                            </li>\n                        }\n                    </ul>\n                </div>\n            </div>\n    )\n}","import { useEffect, useState, lazy, Suspense } from \"react\";\nimport { Route, NavLink, useParams, useRouteMatch, Switch, useLocation, useHistory } from \"react-router-dom\";\nimport * as movieApi from '../../services/moviesApi/moviesApi';\n\nimport Loader from \"../../components/loader/loader\";\nimport Spinner from \"react-loader-spinner\";\nimport s from './movieDetailsView.module.scss';\nimport MovieCard from '../../components/MovieCard/MovieCard'\n\nconst MovieSubCast = lazy(() => import('../../components/MovieSubCast/MovieSubCast'));\nconst MovieSubReviews = lazy(() => import ('../../components/MovieSubReviews/MovieSubReviews'));\n\nexport default function MovieDetailsView() {\n    const [movieDetails, setMovieDetails] = useState(null);\n    const [status, setStatus] = useState(\"idle\");\n\n    const { movieId } = useParams();\n    const { url, path } = useRouteMatch();\n    const location = useLocation();\n    const history = useHistory();\n    const locationToBack=location?.state?.from?.location ?? '/movies';\n    const labelToBack=location?.state?.from?.label ?? 'Go back'\n\n    useEffect(() => {\n        setStatus (\"pending\");\n\n        movieApi.fetchDetails(movieId)\n            .then(response => {\n            setMovieDetails(response)\n            setStatus (\"resolved\")\n\n        }\n            )\n    }, [movieId])\n\n    const onGoBack = () => {\n        history.push(locationToBack)\n    }\n\n    return (\n        <>\n            <button type=\"button\"\n                className={s.Button}\n                onClick={onGoBack}>\n                {labelToBack}\n            </button>\n\n            {(status === 'pending') &&\n                <Spinner type=\"ThreeDots\" color=\"black\" />\n            }\n\n            {(status === 'resolved') &&\n            <>\n                <MovieCard movieDetails={movieDetails} />\n                \n            <div className={s.SubNavBar}>\n                    <hr/>\n                    <h2>Additional Information</h2>\n                <ul className={s.SubInfoList}>\n                    <li>\n                        <NavLink to={{\n                            pathname: `${url}/cast`,\n                            state: {from: {location: locationToBack, label: labelToBack}}\n                            }}\n                                activeClassName={s.ActiveLink}\n                                className={s.Link}\n                                exact>\n                                Cast\n                        </NavLink>\n                    </li>\n                    <li>\n                        <NavLink to={{\n                            pathname: `${url}/review`,\n                            state: {from: {location: locationToBack, label: labelToBack}}\n                            }}\n                                activeClassName={s.ActiveLink}\n                                className={s.Link}\n                                exact>\n                                Reviews\n                        </NavLink>\n                    </li>\n                </ul>\n                <hr/>\n            </div>\n            </>}\n            \n            <Suspense fallback={<Loader />}>\n            <Switch>\n                <Route path={`${path}/cast`}>\n                    <MovieSubCast/>\n                </Route>\n                <Route path={`${path}/review`}>\n                    <MovieSubReviews/>\n                </Route>\n            </Switch>\n            </Suspense>\n        </>\n    )\n}"],"sourceRoot":""}
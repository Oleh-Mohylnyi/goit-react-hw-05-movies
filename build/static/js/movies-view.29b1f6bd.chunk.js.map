{"version":3,"sources":["services/moviesApi/moviesApi.js","images/cinema-movie.jpg","components/GallaryItem/GalleryItem.js","components/GallaryItem/galleryItem.module.scss","views/MoviesView/moviesView.module.scss","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","views/MoviesView/MoviesView.js"],"names":["KEY","URL","fetchMovies","mainQueryString","a","otherQueryString","fetch","response","ok","json","Promise","reject","Error","fetchTrending","fetchSearch","searchQuery","fetchDetails","movieId","fetchCast","fetchReviews","GalleryItem","movie","location","id","poster_path","original_title","vote_average","className","s","Item","Link","to","pathname","state","from","label","alt","Image","width","src","alternativePicture","Title","Average","module","exports","_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","getOwnPropertyDescriptors","defineProperties","MoviesView","useState","inputSearch","setInputSearch","JSON","parse","localStorage","getItem","setSearchQuery","foundMovies","setFoundMovies","status","setStatus","url","useRouteMatch","useLocation","history","useHistory","searchValueURL","URLSearchParams","search","get","responseProcessing","results","setItem","stringify","useEffect","movieApi","then","catch","err","Form","onSubmit","e","trim","toLowerCase","preventDefault","alert","onInput","type","color","Gallery","map"],"mappings":"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","file":"static/js/movies-view.29b1f6bd.chunk.js","sourcesContent":["const KEY = \"9b5febc096912e8933f83f306c054db0\";\nconst URL = \"https://api.themoviedb.org/3\";\n\nasync function fetchMovies(mainQueryString, otherQueryString=\"\") {\n\n    const response = await fetch(\n        `${URL}${mainQueryString}?api_key=${KEY}${otherQueryString}`\n    )\n    return response.ok\n        ? await response.json()\n        : Promise.reject(new Error('Not found'))\n}\n\nexport function fetchTrending() {\n    return fetchMovies('/trending/movie/week')\n}\n\nexport function fetchSearch(searchQuery) {\n    return fetchMovies(`/search/movie`, `&query=${searchQuery}`)\n}\n\nexport function fetchDetails(movieId) {\n    return fetchMovies(`/movie/${movieId}`)\n}\n\nexport function fetchCast(movieId) {\n    return fetchMovies(`/movie/${movieId}/credits`)\n}\n\nexport function fetchReviews(movieId) {\n    return fetchMovies(`/movie/${movieId}/reviews`)\n}\n","export default __webpack_public_path__ + \"static/media/cinema-movie.5c8f8c5b.jpg\";","import { IoIosStarHalf } from 'react-icons/io';\nimport { Link } from \"react-router-dom\";\nimport alternativePicture from '../../images/cinema-movie.jpg';\nimport s from './galleryItem.module.scss';\nimport PropTypes from 'prop-types'\n\nexport default function GalleryItem({ movie, location }) {\n    const { id, poster_path, original_title, vote_average } = movie;\n\n    function backBtnText () {\n        if (location.pathname === \"/\") {return \"Home\"};\n        if (location.pathname === \"/movies\") {return \"Movies\"};\n    }\n\n    return (\n        <li className={s.Item}>\n            <Link\n                className={s.Link}\n                to={{\n                    pathname: `movies/${id}`,\n                    state: {\n                        from: { location, label: `back to ${backBtnText()}` }\n                    },\n                }}>\n                <img alt=\"\"\n                    className={s.Image}\n                    width=\"200px\" \n                    src={poster_path\n                        ?`https://image.tmdb.org/t/p/w300${poster_path}`\n                        :alternativePicture}>\n                </img>\n                <p className={s.Title}>\n                    {original_title}\n                </p>\n            </Link>\n            {vote_average !== 0 &&\n                <p className={s.Average}>\n                <IoIosStarHalf />\n                {vote_average}\n                </p>\n            }\n        </li>\n    )\n}\n\nGalleryItem.propTypes = {\n    movie: PropTypes.object,\n    location: PropTypes.object,\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Item\":\"galleryItem_Item__1dJ4G\",\"Image\":\"galleryItem_Image__A6sJe\",\"Title\":\"galleryItem_Title__3TudR\",\"Link\":\"galleryItem_Link__3Io9f\",\"Average\":\"galleryItem_Average__3WQG7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Gallery\":\"moviesView_Gallery__FPvTE\",\"Form\":\"moviesView_Form__14VRM\"};","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","import { useState, useEffect } from \"react\";\nimport { useRouteMatch, useLocation, useHistory } from \"react-router-dom\";\nimport * as movieApi from '../../services/moviesApi/moviesApi';\n// import alternativePicture from '../images/cinema-movie.jpg';\nimport Spinner from \"react-loader-spinner\";\nimport GalleryItem from \"../../components/GallaryItem/GalleryItem\";\nimport s from './moviesView.module.scss'\n// import NotFoundView from \"../NotFoundView/NotFoundView\";\n\nexport default function MoviesView() {\n    const [inputSearch, setInputSearch] = useState(\"\");\n    const [searchQuery, setSearchQuery] = useState(() => {\n    return JSON.parse(localStorage.getItem('searchQueryMovies')) ?? \"\"\n  })\n    const [foundMovies, setFoundMovies] = useState(() => {\n    return JSON.parse(localStorage.getItem('foundMovies')) ?? \"\"\n  })\n    const [status, setStatus] = useState(\"idle\");\n    \n    const { url } = useRouteMatch();\n    const location = useLocation();\n    const history = useHistory();\n    const searchValueURL = new URLSearchParams(location.search).get('search') ?? \"\"\n    \n    function responseProcessing(response) {\n        if (response.results.length === 0) {\n            setStatus('reject');\n            history.push({ ...location, search: \"\" });\n            return\n        }\n            searchQuery !== \"\" && history.push({ ...location, search: `search=${ searchQuery }` });\n            setStatus(\"resolved\");\n            localStorage.setItem('foundMovies', JSON.stringify(response.results));\n            setFoundMovies(response.results);\n    }\n\n    useEffect(() => {\n        if (searchValueURL === searchQuery) {\n            setStatus(\"resolved\");\n            return\n        }\n            if (searchValueURL === \"\" && inputSearch === \"\") {\n                setInputSearch(\"\");\n                setStatus (\"idle\");\n                return\n            }\n        \n        setStatus(\"pending\");\n                \n        movieApi.fetchSearch(searchQuery)\n        .then(responseProcessing)\n        .catch(err => setStatus(\"reject\"));\n        \n            // eslint-disable-next-line\n    }, [searchQuery])\n\n    const handleInput = (e) => {\n        setInputSearch(e.target.value)\n    }\n\n    const handleSubmit = (e) => {\n        if (inputSearch.trim() === \"\") {\n            alert('please enter your request');\n            return\n        }\n        if (inputSearch.toLowerCase().trim() !== searchQuery) {\n            setSearchQuery(inputSearch.toLowerCase().trim());\n            localStorage.setItem('searchQueryMovies', JSON.stringify(inputSearch.toLowerCase().trim()))\n        } else {\n            setStatus(\"resolved\");\n            history.push({ ...location, search: `search=${ searchQuery }` });\n        }\n        e.preventDefault();\n    }\n\n    return (\n        <>\n        <form className={s.Form}\n            onSubmit={handleSubmit}>\n                <input  \n                    value={inputSearch}\n                    onInput={handleInput}\n                    type=\"text\">\n                </input>\n                <button type=\"submit\">Search</button>\n                \n        </form>\n        {(status === 'pending') &&\n            <Spinner type=\"ThreeDots\" color=\"black\" />\n        }\n        <ul className={s.Gallery}>\n            {(status === 'resolved' && foundMovies !== \"\") && foundMovies.map(movie =>\n                <GalleryItem key={movie.id}\n                    movie={movie}\n                    location={location}\n                    url={url}\n                />\n            )}\n        </ul>\n            {(status === 'reject') && <h2>{`no results found for request: \"${searchQuery}\"`}</h2>\n            // <NotFoundView text=\"Nothing found!\"/>\n        }\n        </>\n    )\n}"],"sourceRoot":""}
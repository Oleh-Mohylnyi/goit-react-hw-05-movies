(this["webpackJsonpgoit-react-hw-05-movies"]=this["webpackJsonpgoit-react-hw-05-movies"]||[]).push([[5],{33:function(e,t,r){"use strict";r.d(t,"e",(function(){return l})),r.d(t,"d",(function(){return f})),r.d(t,"b",(function(){return m})),r.d(t,"a",(function(){return b})),r.d(t,"c",(function(){return p}));var n=r(37),c=r.n(n),a=r(38),o="9b5febc096912e8933f83f306c054db0",i="https://api.themoviedb.org/3";function s(e){return u.apply(this,arguments)}function u(){return u=Object(a.a)(c.a.mark((function e(t){var r,n,a=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:"",e.next=3,fetch("".concat(i).concat(t,"?api_key=").concat(o).concat(r));case 3:if(!(n=e.sent).ok){e.next=10;break}return e.next=7,n.json();case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=Promise.reject(new Error("Not found"));case 11:return e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e)}))),u.apply(this,arguments)}function l(){return s("/trending/movie/week")}function f(e){return s("/search/movie","&query=".concat(e))}function m(e){return s("/movie/".concat(e))}function b(e){return s("/movie/".concat(e,"/credits"))}function p(e){return s("/movie/".concat(e,"/reviews"))}},35:function(e,t,r){"use strict";t.a=r.p+"static/media/cinema-movie.5c8f8c5b.jpg"},39:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n=r(41),c=r(8),a=r(35),o=r(40),i=r.n(o),s=r(1);function u(e){var t=e.movie,r=e.location,o=t.id,u=t.poster_path,l=t.original_title,f=t.vote_average;return Object(s.jsxs)("li",{className:i.a.Item,children:[Object(s.jsxs)(c.b,{className:i.a.Link,to:{pathname:"movies/".concat(o),state:{from:{location:r,label:"back to ".concat("/"===r.pathname?"Home":"/movies"===r.pathname?"Movies":void 0)}}},children:[Object(s.jsx)("img",{alt:"",className:i.a.Image,width:"200px",src:u?"https://image.tmdb.org/t/p/w300".concat(u):a.a}),Object(s.jsx)("p",{className:i.a.Title,children:l})]}),0!==f&&Object(s.jsxs)("p",{className:i.a.Average,children:[Object(s.jsx)(n.a,{}),f]})]})}},40:function(e,t,r){e.exports={Item:"galleryItem_Item__1dJ4G",Image:"galleryItem_Image__A6sJe",Title:"galleryItem_Title__3TudR",Link:"galleryItem_Link__3Io9f",Average:"galleryItem_Average__3WQG7"}},62:function(e,t,r){e.exports={Gallery:"moviesView_Gallery__FPvTE",Form:"moviesView_Form__14VRM"}},68:function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}r.r(t),r.d(t,"default",(function(){return v}));var o=r(36),i=r(0),s=r(2),u=r(33),l=r(34),f=r.n(l),m=r(39),b=r(62),p=r.n(b),j=r(1);function v(){var e,t=Object(i.useState)(""),r=Object(o.a)(t,2),n=r[0],c=r[1],l=Object(i.useState)((function(){var e;return null!==(e=JSON.parse(localStorage.getItem("searchQueryMovies")))&&void 0!==e?e:""})),b=Object(o.a)(l,2),v=b[0],d=b[1],h=Object(i.useState)((function(){var e;return null!==(e=JSON.parse(localStorage.getItem("foundMovies")))&&void 0!==e?e:""})),O=Object(o.a)(h,2),g=O[0],y=O[1],_=Object(i.useState)("idle"),w=Object(o.a)(_,2),x=w[0],I=w[1],S=Object(s.i)().url,k=Object(s.g)(),N=Object(s.f)(),P=null!==(e=new URLSearchParams(k.search).get("search"))&&void 0!==e?e:"";function J(e){if(0===e.results.length)return I("reject"),void N.push(a(a({},k),{},{search:""}));""!==v&&N.push(a(a({},k),{},{search:"search=".concat(v)})),I("resolved"),localStorage.setItem("foundMovies",JSON.stringify(e.results)),y(e.results)}Object(i.useEffect)((function(){if(P!==v){if(""===P&&""===n)return c(""),void I("idle");I("pending"),u.d(v).then(J).catch((function(e){return I("reject")}))}else I("resolved")}),[v]);return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("form",{className:p.a.Form,onSubmit:function(e){""!==n.trim()?(n.toLowerCase().trim()!==v?(d(n.toLowerCase().trim()),localStorage.setItem("searchQueryMovies",JSON.stringify(n.toLowerCase().trim()))):(I("resolved"),N.push(a(a({},k),{},{search:"search=".concat(v)}))),e.preventDefault()):alert("please enter your request")},children:[Object(j.jsx)("input",{value:n,onInput:function(e){c(e.target.value)},type:"text"}),Object(j.jsx)("button",{type:"submit",children:"Search"})]}),"pending"===x&&Object(j.jsx)(f.a,{type:"ThreeDots",color:"black"}),Object(j.jsx)("ul",{className:p.a.Gallery,children:"resolved"===x&&""!==g&&g.map((function(e){return Object(j.jsx)(m.a,{movie:e,location:k,url:S},e.id)}))}),"reject"===x&&Object(j.jsx)("h2",{children:'no results found for request: "'.concat(v,'"')})]})}}}]);
//# sourceMappingURL=movies-view.29b1f6bd.chunk.js.map
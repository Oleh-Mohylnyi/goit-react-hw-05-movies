(this["webpackJsonpgoit-react-hw-05-movies"]=this["webpackJsonpgoit-react-hw-05-movies"]||[]).push([[5],{34:function(e,t,r){"use strict";r.d(t,"e",(function(){return l})),r.d(t,"d",(function(){return f})),r.d(t,"b",(function(){return m})),r.d(t,"a",(function(){return b})),r.d(t,"c",(function(){return p}));var n=r(38),c=r.n(n),a=r(39),o="9b5febc096912e8933f83f306c054db0",i="https://api.themoviedb.org/3";function s(e){return u.apply(this,arguments)}function u(){return u=Object(a.a)(c.a.mark((function e(t){var r,n,a=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:"",e.next=3,fetch("".concat(i).concat(t,"?api_key=").concat(o).concat(r));case 3:if(!(n=e.sent).ok){e.next=10;break}return e.next=7,n.json();case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=Promise.reject(new Error("Not found"));case 11:return e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e)}))),u.apply(this,arguments)}function l(){return s("/trending/movie/week")}function f(e){return s("/search/movie","&query=".concat(e))}function m(e){return s("/movie/".concat(e))}function b(e){return s("/movie/".concat(e,"/credits"))}function p(e){return s("/movie/".concat(e,"/reviews"))}},36:function(e,t,r){"use strict";t.a=r.p+"static/media/cinema-movie.5c8f8c5b.jpg"},40:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n=r(42),c=r(8),a=r(36),o=r(41),i=r.n(o),s=r(1);function u(e){var t=e.movie,r=e.location,o=t.id,u=t.poster_path,l=t.original_title,f=t.vote_average;return Object(s.jsxs)("li",{className:i.a.Item,children:[Object(s.jsxs)(c.b,{className:i.a.Link,to:{pathname:"movies/".concat(o),state:{from:{location:r,label:"back to ".concat("/"===r.pathname?"Home":"/movies"===r.pathname?"Movies":void 0)}}},children:[Object(s.jsx)("img",{alt:"",className:i.a.Image,width:"200px",src:u?"https://image.tmdb.org/t/p/w300".concat(u):a.a}),Object(s.jsx)("p",{className:i.a.Title,children:l})]}),0!==f&&Object(s.jsxs)("p",{className:i.a.Average,children:[Object(s.jsx)(n.a,{}),f]})]})}},41:function(e,t,r){e.exports={Item:"galleryItem_Item__1dJ4G",Image:"galleryItem_Image__A6sJe",Title:"galleryItem_Title__3TudR",Link:"galleryItem_Link__3Io9f",Average:"galleryItem_Average__3WQG7"}},63:function(e,t,r){e.exports={Gallery:"moviesView_Gallery__FPvTE",Form:"moviesView_Form__14VRM"}},69:function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}r.r(t),r.d(t,"default",(function(){return d}));var o=r(37),i=r(0),s=r(2),u=r(34),l=r(35),f=r.n(l),m=r(40),b=r(63),p=r.n(b),j=r(16),v=r(1);function d(){var e,t=Object(i.useState)(""),r=Object(o.a)(t,2),n=r[0],c=r[1],l=Object(i.useState)((function(){var e;return null!==(e=JSON.parse(localStorage.getItem("searchQueryMovies")))&&void 0!==e?e:""})),b=Object(o.a)(l,2),d=b[0],O=b[1],h=Object(i.useState)((function(){var e;return null!==(e=JSON.parse(localStorage.getItem("foundMovies")))&&void 0!==e?e:null})),g=Object(o.a)(h,2),y=g[0],_=g[1],x=Object(i.useState)("idle"),w=Object(o.a)(x,2),I=w[0],S=w[1],k=Object(s.i)().url,N=Object(s.g)(),P=Object(s.f)(),J=null!==(e=new URLSearchParams(N.search).get("search"))&&void 0!==e?e:"";Object(i.useEffect)((function(){J!==d?""===J&&""===n||(c(""),S("pending"),""!==d&&P.push(a(a({},N),{},{search:"search=".concat(d)})),u.d(d).then((function(e){S("resolved"),localStorage.setItem("foundMovies",JSON.stringify(e.results)),localStorage.setItem("searchQueryMovies",JSON.stringify(d)),_(e.results)})).catch((function(e){return S("reject")}))):S("resolved")}),[d]);return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("form",{className:p.a.Form,onSubmit:function(e){""!==n.trim()?(e.preventDefault(),n.toLowerCase().trim()!==d?O(n.toLowerCase().trim()):(S("resolved"),P.push(a(a({},N),{},{search:"search=".concat(d)})))):alert("please enter your request")},children:[Object(v.jsx)("input",{value:n,onInput:function(e){c(e.target.value)},type:"text"}),Object(v.jsx)("button",{type:"submit",children:"Search"})]}),"pending"===I&&Object(v.jsx)(f.a,{type:"ThreeDots",color:"black"}),Object(v.jsx)("ul",{className:p.a.Gallery,children:"resolved"===I&&y.map((function(e){return Object(v.jsx)(m.a,{movie:e,location:N,url:k},e.id)}))}),"reject"===I&&Object(v.jsx)(j.a,{text:"Nothing found!"})]})}}}]);
//# sourceMappingURL=movies-view.a9b90422.chunk.js.map